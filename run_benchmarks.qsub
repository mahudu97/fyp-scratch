#!/bin/bash
#$ -N run_benchmark
#$ -wd /share/data/mehedi/fyp-scratch
#$ -l newnode

# build libxsmm
alias gcc=/share/data/mehedi/gcc-build/bin/gcc
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/share/data/mehedi/gcc-build/lib64
export LD_RUN_PATH=$LD_RUN_PATH:/share/data/mehedi/gcc-build/lib64

cd /share/data/mehedi/libxsmm_local
make realclean
make -j8
cd /share/data/mehedi/fyp-scratch

source /share/data/mehedi/Python/Python-3.6.8-share/ENV_MPI4/bin/activate
python3 src/benchmark.py example_mats_med/ 256 /share/data/mehedi/fyp-scratch
